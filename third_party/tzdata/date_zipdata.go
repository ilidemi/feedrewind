// Copyright 2020 The Go Authors. All rights reserved.
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.

//go:build ignore

package main

import (
	"fmt"
	"os"
	"time"
)

func main() {
	zoneInfo, err := os.ReadFile("third_party/tzdata/zoneinfo.zip")
	if err != nil {
		panic(err)
	}
	zzipDataContents := fmt.Sprintf(
		"// Code generated by date_zipdata; DO NOT EDIT.\n\npackage tzdata\n\nconst zipdata = %q\n",
		zoneInfo,
	)
	err = os.WriteFile("third_party/tzdata/zzipdata.go", []byte(zzipDataContents), 0666)
	if err != nil {
		panic(err)
	}
	updatedDate := time.Now().Format("2006-01-02")
	updatedDateContents := fmt.Sprintf(
		"// Code generated by date_zipdata. DO NOT EDIT.\n\npackage tzdata\n\nconst UpdatedDate = %q\n",
		updatedDate,
	)
	err = os.WriteFile("third_party/tzdata/updated_date.go", []byte(updatedDateContents), 0666)
	if err != nil {
		panic(err)
	}
}
